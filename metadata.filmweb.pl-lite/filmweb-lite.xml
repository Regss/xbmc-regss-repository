<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<!--
    GLOBALNE:
    $$20 - Filmweb ID
    $$19 - IMDb ID
    $$18 - TMDb ID
    $$17 - Tytuł polski
    $$16 - Tytuł oryginalny z przedrostkiem z przodu.
    $$15 - Rok
    $$14 - Zakodowany tytuł dla URL
!-->
<scraper framework="1.1" date="2013-07-29">
    
    <!-- Sprawdza czy istnieje plik NFO, jesli tak kopiuje informacje !-->
    <NfoUrl dest="3">
        <RegExp input="$$1" output="\1" dest="3">
            <expression />
        </RegExp>
    </NfoUrl>
    
    <!-- Tworzy adres URL wyszukiwania !-->
    <CreateSearchUrl dest="3">
        <RegExp input="$$1" output="&lt;url&gt;http://www.filmweb.pl/search/film?q=\1&amp;startYear=$$2&amp;endYear=$$2&lt;/url&gt;" dest="3">
            <expression noclean="1" />
        </RegExp>
    </CreateSearchUrl>
    
    <!-- Tworzy adresy URL dla znalezionych pozycji !-->
    <GetSearchResults dest="8">
        <RegExp input="$$5" output="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; standalone=&quot;yes&quot;?&gt;&lt;results&gt;\1&lt;/results&gt;" dest="8">
            <RegExp input="$$1" output="&lt;entity&gt;&lt;title&gt;\1&lt;/title&gt;&lt;year&gt;\3&lt;/year&gt;&lt;url cache=&quot;filmweb-\2&quot;&gt;http://www.filmweb.pl/Film?id=\2&lt;/url&gt;&lt;/entity&gt;" dest="5">
                <expression repeat="yes" fixchars="1">hitDescWrapp[^&lt;]+&lt;h3&gt;(.*?)&lt;/h3&gt;.*?([0-9]*)_FILM_([0-9]*)</expression>
            </RegExp>
            <expression noclean="1" />
        </RegExp>
    </GetSearchResults>
    
    <!-- Pobiera podstawowe informacje !-->
    <GetDetails clearbuffers="no" dest="3">
        <RegExp input="$$5" output="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; standalone=&quot;yes&quot;?&gt;&lt;details&gt;\1&lt;/details&gt;" dest="3">

            <!-- FILMWEB ID !-->
            <RegExp input="$$1" output="\1" dest="20">
                <expression noclean="1">filmId&gt;([0-9]*)</expression>
            </RegExp>
            <RegExp input="$$20" output="&lt;id_filmweb&gt;\1&lt;/id_filmweb&gt;" dest="5">
                <expression />
            </RegExp>

            <!-- TITLE !-->
            <RegExp input="$$17" output="&lt;title&gt;\1&lt;/title&gt;" dest="5+">
                <RegExp input="$$1" output="\1" dest="17">
                    <expression fixchars="1" trim="1">v:itemreviewed&quot;&gt;([^&lt;]+)&lt;</expression>
                </RegExp>
                <expression />
            </RegExp>

            <!-- ORIGINALTITLE !-->
            <RegExp input="$$6" output="&lt;originaltitle&gt;\1&lt;/originaltitle&gt;" dest="5+">
                <RegExp input="$$17" output="\1" dest="16">
                    <expression />
                </RegExp>
                <RegExp input="$$1" output="\1" dest="16">
                    <expression fixchars="1" trim="1">h2 class=&quot;text-large caption&quot;&gt;([^&lt;]+)&lt;</expression>
                </RegExp>
                <RegExp input="$$16" output="\2 \1" dest="16">
                    <expression>(.*), ('E|A|A'|Al|Al-|Am|An|Ang|As|Az|Bat|D'|Da|Das|De|Dei|Dem|Den|Der|Des|Det|Die|Dos|E|Ei|Ein|Eine|Einem|Einen|Einer|Eines|Eit|El|El-|Els|En|Et|Gli|Ha|Ha-|Hai|He|He-|Hen|Het|Hi|Hin|Ho|Ho-|Hoi|I|Il|Il-|L'|La|Las|Le|Les|Lo|Los|Na|Nang|Ni|O|Os|Sa|Si|Ta|Ten|Tes|The|To|Ton|Um|Uma|Umas|Un|Un'|Una|Unas|Une|Uno|Unos)$</expression>
                </RegExp>
                <RegExp input="$$16" output="\1" dest="6">
                    <expression />
                </RegExp>
                <expression>(.+)</expression>
            </RegExp>

            <!-- YEAR !-->
            <RegExp input="$$15" output="&lt;year&gt;\1&lt;/year&gt;" dest="5+">
                <RegExp input="$$1" output="\1" dest="15">
                    <expression fixchars="1" trim="1">id=filmYear[^&gt;]+&gt;\(([0-9]*)\)</expression>
                </RegExp>
                <expression />
            </RegExp>

            <!-- DIRECTOR !-->
            <RegExp input="$$7" output="\1" dest="5+">
                <RegExp input="$$1" output="\1" dest="6">
                    <expression clear="yes" noclean="1">reżyseria:(.*?)&lt;/ul&gt;</expression>
                </RegExp>
                <RegExp input="$$6" output="&lt;director&gt;\1&lt;/director&gt;" dest="7">
                    <expression repeat="yes" fixchars="1" trim="1">v:directedBy&quot;&gt;([^&lt;]+)&lt;</expression>
                </RegExp>
                <expression noclean="1">(.+)</expression>
            </RegExp>

            <!-- CREDITS !-->
            <RegExp input="$$7" output="\1" dest="5+">
                <RegExp input="$$1" output="\1" dest="6">
                    <expression clear="yes" noclean="1">scenariusz:(.*?)&lt;/ul&gt;</expression>
                </RegExp>
                <RegExp input="$$6" output="&lt;credits&gt;\1&lt;/credits&gt;" dest="7">
                    <expression repeat="yes" fixchars="1" trim="1">title=[^&gt;]+&gt;([^&lt;]+)&lt;</expression>
                </RegExp>
                <expression noclean="1">(.+)</expression>
            </RegExp>

            <!-- GENRES !-->
            <RegExp input="$$7" output="\1" dest="5+">
                <RegExp input="$$1" output="\1" dest="6">
                    <expression clear="yes" noclean="1">gatunek:(.*?)&lt;/ul</expression>
                </RegExp>
                <RegExp input="$$6" output="&lt;genre&gt;\1&lt;/genre&gt;" dest="7">
                    <expression repeat="yes" fixchars="1" trim="1">a href=[^&gt;]+&gt;([^&lt;]+)&lt;</expression>
                </RegExp>
                <expression noclean="1">(.+)</expression>
            </RegExp>

            <!-- TAGLINE !-->
            <RegExp input="$$1" output="&lt;tagline&gt;\1&lt;/tagline&gt;" dest="5+">
                <expression fixchars="1">hdr-bigger&quot;&gt;[^&gt;]+&gt;([^&lt;]+)&lt;</expression>
            </RegExp>

            <!-- OUTLINE !-->
            <RegExp input="$$1" output="&lt;outline&gt;\1&lt;/outline&gt;" dest="5+">
                <expression fixchars="1">filmPlot&gt;&lt;p&gt;([^&lt;]+)</expression>
            </RegExp>

            <!-- COUNTRY !-->
            <RegExp input="$$7" output="\1" dest="5+">
                <RegExp input="$$1" output="\1" dest="6">
                    <expression clear="yes" noclean="1">produkcja:(.*?)&lt;/ul</expression>
                </RegExp>
                <RegExp input="$$6" output="&lt;country&gt;\1&lt;/country&gt;" dest="7">
                    <expression repeat="yes" fixchars="1" trim="1">a href=[^&gt;]+&gt;([^&lt;]+)&lt;</expression>
                </RegExp>
                <expression noclean="1">(.+)</expression>
            </RegExp>

            <!-- RATING !-->
            <RegExp input="$$1" output="&lt;rating&gt;\1.\2&lt;/rating&gt;" dest="5+">
                <expression noclean="1">v:average&quot;&gt; ([0-9]*),([0-9]*)&lt;</expression>
            </RegExp>

            <!-- VOTES !-->
            <RegExp input="$$1" output="&lt;votes&gt;\1&lt;/votes&gt;" dest="5+">
                <expression noclean="1">v:votes&quot;&gt;([^&lt;]+)</expression>
            </RegExp>

            <!-- STUDIO !-->
            <RegExp conditional="!GetTMDbStudio" input="$$6" output="&lt;studio&gt;\1&lt;/studio&gt;" dest="5+">
                <RegExp input="$$1" output="\1" dest="6">
                    <expression fixchars="1" clear="yes">dystrybucja:&lt;/dt&gt;&lt;dd&gt;(.*?)&lt;/dd</expression>
                </RegExp>
                <expression noclean="1">(.+)</expression>
            </RegExp>

            <!-- MUZYKA !-->
            <RegExp input="$$7" output="\1" dest="5+">
                <RegExp input="$$1" output="\1" dest="6">
                    <expression clear="yes" noclean="1">muzyka:&lt;/dt&gt;&lt;dd&gt;(.*?)&lt;/dd</expression>
                </RegExp>
                <RegExp input="$$6" output="&lt;tag&gt;Muzyka: \1&lt;/tag&gt;" dest="7">
                    <expression fixchars="1" repeat="yes">a href[^&gt;]+&gt;([^&lt;]+)&lt;</expression>
                </RegExp>
            <expression noclean="1">(.+)</expression>
            </RegExp>

            <!-- PLOT !-->
            <RegExp conditional="!GetDVDPlot" input="$$1" output="&lt;plot&gt;\1&lt;/plot&gt;" dest="5+">
                <expression fixchars="1">v:summary&quot;&gt;(.*?)&lt;/</expression>
            </RegExp>
            <RegExp conditional="GetDVDPlot" input="$$1" output="&lt;url function=&quot;DVD_PLOT&quot;&gt;http://www.filmweb.pl\1&lt;/url&gt;" dest="5+">
                <expression noclean="1">filmMenu-filmDescriptions class=&quot;wl &quot;&gt;&lt;a href=&quot;(.*?)&quot;</expression>
            </RegExp>

            <!-- ACTORS !-->
            <RegExp conditional="!GetFullActors" input="$$7" output="\1" dest="5+">
                <RegExp input="$$1" output="\1" dest="6">
                    <expression clear="yes" noclean="1">class=&quot;pageBox filmCastBox&quot;&gt;(.*?)zobacz pełną</expression>
                </RegExp>
                <RegExp input="$$6" output="&lt;actor&gt;&lt;name&gt;\2&lt;/name&gt;&lt;role&gt;\3&lt;/role&gt;&lt;thumb&gt;\1&lt;/thumb&gt;&lt;/actor&gt;" dest="7">
                    <expression repeat="yes" fixchars="2,3" trim="2,3">li&gt;.*?src=&quot;(.*?)&quot;.*?v:starring&quot;&gt;(.*?)&lt;/a.*?roleName&gt;(.*?)&lt;/span.*?&lt;/li</expression>
                </RegExp>

                <!-- Jeśli film to animacja to uruchamia funkcje AKTORZY !-->
                <RegExp input="$$1" output="\1" dest="6">
                    <expression noclean="1">gatunek:([^:]+):</expression>
                </RegExp>
                <RegExp input="$$6" output="&lt;url function=&quot;AKTORZY&quot;&gt;http://www.filmweb.pl/film/xbmc-2009-$$20/cast&lt;/url&gt;" dest="7">
                    <expression>.+?Animacja.+</expression>
                </RegExp>
                <expression noclean="1">(.+)</expression>
            </RegExp>
            <RegExp conditional="GetFullActors" input="" output="&lt;url function=&quot;AKTORZY&quot;&gt;http://www.filmweb.pl/film/xbmc-2009-$$20/cast&lt;/url&gt;" dest="5+">
                <expression noclean="1" />
            </RegExp>

            <!-- THUMB !-->
            <RegExp input="$$1" output="&lt;thumb aspect=&quot;poster&quot; preview=&quot;\12\2&quot;&gt;\13\2&lt;/thumb&gt;" dest="5+">
                <expression noclean="1">v:image&quot; href=&quot;([^\.]+\.[^\.]+\.[^\.]+\.).([^\?]+)\?</expression>
            </RegExp>

            <!-- TRAILER !-->
            <RegExp conditional="GetTrailer" input="$$1" output="&lt;url function=&quot;TRAILER&quot;&gt;http://www.filmweb.pl\1&lt;/url&gt;" dest="5+">
                <expression noclean="1">videosList.*?&quot;(/video/trailer/[^&quot;]+)&quot;</expression>
            </RegExp>

            <!-- TMDbSearch - Wyszukuje TMDbID na TMDb !-->
            <RegExp conditional="UseTMDb" input="$$16" output="&lt;url function=&quot;TMDbSearch&quot;&gt;http://api.themoviedb.org/3/search/movie?api_key=1009b5cde25c7b0692d51a7db6e49cbd&amp;query=\1&lt;/url&gt;" dest="5+">
                <expression encode="1" />
            </RegExp>

            <!-- FANART !-->
            <RegExp input="" output="&lt;url function=&quot;FANART&quot; cache=&quot;filmweb-$$20&quot;&gt;http://www.filmweb.pl/Film?id=$$20&lt;/url&gt;" dest="5+">
                <expression />
            </RegExp>

            <expression noclean="1" />
        </RegExp>
    </GetDetails>

    <!-- Wyszukuje TMDb ID jeśli istnieje, szuka IMDb ID jeśli nie szuka go na google !-->
    <TMDbSearch clearbuffers="no" dest="3">
        <RegExp input="$$5" output="&lt;details&gt;\1&lt;/details&gt;" dest="3">
            <!-- Zapisuje TMDb ID i jeśli istnieje wyszukuje IMDb ID !-->
            <RegExp input="$$6" output="&lt;url cache=&quot;tmdb-en-\1.json&quot; function=&quot;TMDbIDtoIMDbID&quot;&gt;http://api.themoviedb.org/3/movie/\1?api_key=1009b5cde25c7b0692d51a7db6e49cbd&lt;/url&gt;" dest="5">
                <!-- Pierwsze znalezione ID !-->
                <RegExp input="$$1" output="\1" dest="6">
                    <expression clear="yes">&quot;id&quot;:([0-9]+),&quot;</expression>
                </RegExp>
                <!-- ID filmu z identyczną datą wydania !-->
                <RegExp input="$$1" output="\1" dest="6">
                    <expression>&quot;id&quot;:([0-9]+),&quot;original_title&quot;:&quot;[^&quot;]+&quot;,&quot;release_date&quot;:&quot;$$15</expression>
                </RegExp>
                <!-- ID filmu z identycznym tytułem !-->
                <RegExp input="$$1" output="\1" dest="6">
                    <expression>&quot;id&quot;:([0-9]+),&quot;original_title&quot;:&quot;$$16&quot;</expression>
                </RegExp>
                <!-- ID filmu z identycznym tytułem i datą wydania !-->
                <RegExp input="$$1" output="\1" dest="6">
                    <expression>&quot;id&quot;:([0-9]+),&quot;original_title&quot;:&quot;$$16&quot;,&quot;release_date&quot;:&quot;$$15</expression>
                </RegExp>
                <!-- Kopiuje TMDb ID do $$18 !-->
                <RegExp input="$$6" output="\1" dest="18">
                    <expression />
                </RegExp>
                <expression clear="yes" noclean="1">(.+)</expression>
            </RegExp>
            
            <!-- Zapisuje TMDb ID do tagu !-->
            <RegExp input="$$18" output="&lt;id_tmdb&gt;\1&lt;/id_tmdb&gt;" dest="5+">
                <expression noclean="1">(.+)</expression>
            </RegExp>

            <!-- Jeśli TMDb ID nie istnieje wyszukuje IMDb ID na google !-->
            <RegExp input="$$16" output="\1" dest="14">
                <expression encode="1" />
            </RegExp>
            <RegExp input="$$18" output="&lt;url function=&quot;GoogleSearch&quot;&gt;http://ajax.googleapis.com/ajax/services/search/web?v=1.0&amp;q=$$14+site:imdb.com&amp;hl=pl&lt;/url&gt;" dest="5">
                <expression>^$</expression>
            </RegExp>
            <expression clear="yes" noclean="1">(.+)</expression>
        </RegExp>
    </TMDbSearch>

    <!-- Zapisuje IMDB ID a jeśli nie istnieje szuka na google !-->
    <TMDbIDtoIMDbID clearbuffers="no" dest="3">
        <RegExp input="$$5" output="&lt;details&gt;\1&lt;/details&gt;" dest="3">
            <!-- Jeśli na TMDb występuje IMDb ID przenosi do pozostałych funkcji !-->
            <RegExp input="$$1" output="&lt;chain function=&quot;TMDbFunction&quot;&gt;\1&lt;/chain&gt;" dest="5">
                <expression clear="yes">imdb_id&quot;:&quot;([t0-9]+)&quot;</expression>
            </RegExp>

            <!-- Jeśli na TMDb nie istnieje IMDb ID wyszukuje na google !-->
            <RegExp input="$$5" output="&lt;url function=&quot;GoogleSearch&quot;&gt;http://ajax.googleapis.com/ajax/services/search/web?v=1.0&amp;q=$$14+site:imdb.com&amp;hl=pl&lt;/url&gt;" dest="5">
                <expression>^$</expression>
            </RegExp>
            <expression clear="yes" noclean="1">(.+)</expression>
        </RegExp>
    </TMDbIDtoIMDbID>

    <!-- Wyszukuje IMDb ID na google !-->
    <GoogleSearch clearbuffers="no" dest="3">
        <RegExp input="$$5" output="&lt;details&gt;\1&lt;/details&gt;" dest="3">
            <RegExp input="$$6" output="&lt;chain function=&quot;TMDbFunction&quot;&gt;\1&lt;/chain&gt;" dest="5">
                <!-- Pobiera IMDB ID !-->
                <RegExp input="$$1" output="\1" dest="6">
                    <expression clear="yes">/title/([t0-9]+)</expression>
                </RegExp>
                <RegExp input="$$1" output="\1" dest="6">
                    <expression>/title/([t0-9]+)[^\(]+\($$15\)</expression>
                </RegExp>
                <expression />
            </RegExp>
            <expression clear="yes" noclean="1">(.+)</expression>
        </RegExp>
    </GoogleSearch>

    <!-- Funkcje TMDb !-->
    <TMDbFunction clearbuffers="no" dest="3">
        <RegExp input="$$5" output="&lt;details&gt;\1&lt;/details&gt;" dest="3">

            <!-- IMDb ID do tagu oraz do $$19 !-->
            <RegExp input="$$6" output="&lt;id&gt;\1&lt;/id&gt;" dest="5">
                <RegExp input="$$1" output="\1" dest="19">
                    <expression clear="yes">([t0-9]+)</expression>
                </RegExp>
                <RegExp input="$$19" output="\1" dest="6">
                    <expression clear="yes" />
                </RegExp>
                <expression clear="yes">(.+)</expression>
            </RegExp>
            
            <!-- THUMB TMDb !-->
            <RegExp conditional="GetTMDbThumb" input="$$19" output="&lt;chain function=&quot;GetTMDBThumbsByIdChain&quot;&gt;\1&lt;/chain&gt;" dest="5+">
                <expression noclean="1">(.+)</expression>
            </RegExp>

            <!-- FANART !-->
            <RegExp conditional="GetTMDbFanart" input="" output="&lt;chain function=&quot;GetTMDBFanartByIdChain&quot;&gt;$$18&lt;/chain&gt;" dest="5+">
                <expression />
            </RegExp>

            <!-- SETS !-->
            <RegExp conditional="GetTMDbSets" input="" output="&lt;chain function=&quot;GetTMDBSetByIdChain&quot;&gt;$$18&lt;/chain&gt;" dest="5+">
                <expression />
            </RegExp>

            <!-- MPAA !-->
            <RegExp conditional="GetTMDbMPAA" input="" output="&lt;chain function=&quot;GetTMDBCertificationsByIdChain&quot;&gt;$$18&lt;/chain&gt;" dest="5+">
                <expression />
            </RegExp>

            <!-- STUDIO !-->
            <RegExp conditional="GetTMDbStudio" input="" output="&lt;chain function=&quot;GetTMDBStudioByIdChain&quot;&gt;$$18&lt;/chain&gt;" dest="5+">
                <expression />
            </RegExp>

            <expression clear="yes" noclean="1">(.+)</expression>
        </RegExp>
    </TMDbFunction>

    <!-- Funkcja wyszukuje opisy wydania DVD !-->
    <DVD_PLOT clearbuffers="no" dest="3">
        <RegExp input="$$1" output="\1" dest="6">
            <expression noclean="1">filmSubpageContentWrapper(.*?)&lt;/script&gt;</expression>
        </RegExp>
        <RegExp input="$$6" output="&lt;plot&gt;\1&lt;/plot&gt;" dest="7">
            <expression fixchars="1">hoverOpacity&quot; id=[0-9]+&gt;&lt;p[^&gt;]+&gt;(.*?)&lt;/p</expression>
        </RegExp>
        <RegExp input="$$6" output="&lt;plot&gt;\2 [opis dystrybutora]&lt;/plot&gt;" dest="7">
            <expression fixchars="2">hoverOpacity&quot; id=([0-9]+)&gt;&lt;p[^&gt;]+&gt;(.*?)&lt;/p.*?Delete=\1.{2,300}\[opis dystrybutora</expression>
        </RegExp>
        <RegExp input="$$6" output="&lt;plot&gt;\2 [opis dystrybutora DVD]&lt;/plot&gt;" dest="7">
            <expression fixchars="2">hoverOpacity&quot; id=([0-9]+)&gt;&lt;p[^&gt;]+&gt;(.*?)&lt;/p.*?Delete=\1.{2,300}\[opis dystrybutora dvd</expression>
        </RegExp>
        <RegExp input="$$7" output="&lt;details&gt;\1&lt;/details&gt;" dest="3">
            <expression clear="yes" noclean="1">(.+)</expression>
        </RegExp>
    </DVD_PLOT>

    <!-- Funkcja dodaje jeden fanart na końcu listy fanartów !-->
    <FANART clearbuffers="no" dest="3">
        <RegExp input="$$1" output="&lt;details&gt;&lt;fanart&gt;&lt;thumb preview=&quot;\13\2&quot;&gt;\11\2&lt;/thumb&gt;&lt;/fanart&gt;&lt;/details&gt;" dest="3">
            <expression clear="yes" noclean="1" >filmPhotos&quot;&gt;&lt;div class=col&gt;&lt;a href=&quot;([^\.]+\.[^\.]+\.[^\.]+\.)1([^"]+)&quot;</expression>
        </RegExp>
    </FANART>

    <!-- Funkcja pobiera pełną obsadę !-->
    <AKTORZY clearbuffers="no" dest="3">
        <RegExp input="$$8" output="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; standalone=&quot;yes&quot;?&gt;&lt;details&gt;\1&lt;/details&gt;" dest="3">
            <RegExp input="$$1" output="\1" dest="6">
                <expression noclean="1">&gt; aktor(.*?)&lt;/ul</expression>
            </RegExp>
            <RegExp input="$$6" output="&lt;actor&gt;&lt;thumb&gt;\21\3\4&lt;/thumb&gt;&lt;name&gt;\5&lt;/name&gt;&lt;role&gt;\6 \7&lt;/role&gt;&lt;/actor&gt;" dest="7">
                <expression repeat="yes" fixchars="5,6,7" trim="5,6,7" noclean="2,3">(src="(?:([^"]*\.)[^"]*(\.jpg))?[^\/]+\/span&gt;|pNoImg05"&gt;([^&lt;]+)&lt;/span&gt;)[^&gt;]+&gt;[^&gt;]+&gt;[^&gt;]+&gt;([^&lt;]+)[^=]+[^&gt;]+&gt;[^&gt;]+&gt;[^&gt;]+&gt;[^&gt;]+&gt;([^&lt;]+)[^&gt;]+&gt;[^&gt;]+&gt;([^&lt;]+)</expression>
            </RegExp>
            <RegExp input="$$6" output="&lt;actor&gt;&lt;thumb&gt;\21\3\4&lt;/thumb&gt;&lt;name&gt;\5&lt;/name&gt;&lt;role&gt;\6 (polski dubbing)&lt;/role&gt;&lt;/actor&gt;" dest="7">
                <expression repeat="yes" fixchars="5,6" trim="5,6" noclean="2,3">(src="(?:([^"]*\.)[^"]*(\.jpg))?[^\/]+\/span&gt;|pNoImg05"&gt;([^&lt;]+)&lt;/span&gt;)[^&gt;]+&gt;[^&gt;]+&gt;[^&gt;]+&gt;([^&lt;]+)[^=]+[^&gt;]+&gt;[^&gt;]+&gt;[^&gt;]+&gt;[^&gt;]+&gt;([^&lt;]+)[^&gt;]+&gt;[^&gt;]+&gt; \(polski dubbing</expression>
            </RegExp>
            <RegExp input="$$7" output="&lt;actor&gt;&lt;thumb&gt;\1&lt;/thumb&gt;\2&lt;/actor&gt;" dest="8">
                <expression repeat="yes" clear="yes" noclean="1,2,3">&lt;actor&gt;&lt;thumb&gt;(?:(http.*?)|1)&lt;/thumb&gt;(.*?)&lt;/actor&gt;</expression>
            </RegExp>
            <expression clear="yes" noclean="1">(.+)</expression>
        </RegExp>
    </AKTORZY>

    <!-- Funkcja wyszukuje trailer !-->
    <TRAILER clearbuffers="no" dest="3">
        <RegExp input="$$4" output="&lt;details&gt;&lt;trailer&gt;\1&lt;/trailer&gt;&lt;/details&gt;" dest="3">
            <RegExp input="$$1" output="\1" dest="4">
                <expression noclean="1">source src=&quot;([^&quot;]+)&quot;</expression>
            </RegExp>
            <RegExp input="$$1" output="\1" dest="4">
                <expression noclean="1">param name=movie value=&quot;([^&quot;]+)&quot;</expression>
            </RegExp>
            <RegExp input="$$1" output="\1" dest="4">
                <expression noclean="1">param name=filename value=&quot;([^&quot;]+)&quot;</expression>
            </RegExp>
            <RegExp input="$$1" output="plugin://plugin.video.youtube/?action=play_video&videoid=\1" dest="4">
                <expression noclean="1">&quot;http://www.youtube.com/v/([^&quot;]+)&quot;</expression>
            </RegExp>
            <expression noclean="1"/>
        </RegExp>
    </TRAILER>
</scraper>